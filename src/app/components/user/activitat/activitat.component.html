<!-- Formulari de dades d'usuari -->
<form (ngSubmit)="onSubmit()">
  <div>
    <p>*Escull l'activitat per a l'adreça <strong>{{ this.adreca?.adreca }}, ZONA: {{this.adreca?.codi_zona}}{{this.adreca?.codi_area ? ", Àrea: " + this.adreca?.codi_area : ""}}</strong></p>
    <div class="seleccionables">
      <div class="seleccionable">
        <label for="grup">Grup:</label>
        <select id="grup" [(ngModel)]="selectedGrup" name="grup" (change)="onGrupChange()" required>
          <option value="" disabled selected>Selecciona un grup</option>
          <option *ngFor="let grup of grups" [value]="grup">{{ grup }}</option>
        </select>
        <input
          type="text"
          placeholder="O bé escriu aquí per buscar un grup"
          id="grupText"
          [(ngModel)]="selectedGrup"
          name="grup"
          (input)="filterGrup($event)"
          required
        />
        <ul *ngIf="filteredGrups.length > 0">
          <li *ngFor="let grup of filteredGrups" (click)="selectGrup(grup)">
            {{ grup }}
          </li>
        </ul>
      </div>
      <div class="seleccionable">
        <label for="subgrup">Subgrup:</label>
        <select id="subgrup" [(ngModel)]="selectedSubgrup" name="subgrup" (change)="onSubgrupChange()"
                *ngIf="subgrups.length > 0" required>
          <option value="" disabled selected>Selecciona un subgrup</option>
          <option *ngFor="let subgrup of subgrups" [value]="subgrup">{{ subgrup }}</option>
        </select>
        <input
          type="text"
          placeholder="O bé escriu aquí per buscar un subgrup"
          id="subgrupText"
          [(ngModel)]="selectedSubgrup"
          name="subgrup"
          (input)="filterSubgrup($event)"
          required
        />
        <ul *ngIf="filteredSubgrups.length > 0">
          <li *ngFor="let subgrup of filteredSubgrups" (click)="selectSubgrup(subgrup)">
            {{ subgrup }}
          </li>
        </ul>
      </div>
      <div class="seleccionable">
        <label for="activitat">Activitat:</label>
        <select id="activitat" [(ngModel)]="selectedActivitat" name="activitat" (change)="onDescripcioChange()" [ngStyle]="{ color: getColor(selectedActivitat) }" required>
          <option value="" disabled selected>Selecciona una activitat</option>
          <option *ngFor="let act of activitatsFiltrades" [value]="act" [ngStyle]="{ color: getColor(act) }">{{ act }}</option>
        </select>
        <input
          type="text"
          placeholder="O bé escriu aquí per buscar una activitat"
          id="descripcioText"
          [(ngModel)]="selectedActivitat"
          name="activitat"
          (input)="filterDescripcio($event)"
          required
          [ngStyle]="{ color: getColor(selectedActivitat) }"
        />
        <ul *ngIf="filteredDescripcions.length > 0">
          <li *ngFor="let descripcio of filteredDescripcions" (click)="selectDescripcio(descripcio)" [ngStyle]="{ color: getColor(descripcio) }">
            {{ descripcio }}
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div class="condicions" *ngIf="activitatsFiltrades.length > 0">
    <h3>Llegenda de condicions:</h3>
    <p style="color: green">Les activitats de color verd, són activitats APTES per l'adreça.</p>
    <p style="color: orange">Les activitats de color taronja, són activitats APTES AMB CONDICIONS per l'adreça.</p>
    <p style="color: red;">Les activitats de color vermell, són activitats NO aptes per l'adreça.</p>
  </div>

  <div class="buttons">
    <button type="button" (click)="goBack()">Tornar enrera</button>
    <button type="submit" [disabled]="!selectedActivitat">Enviar</button>
  </div>
</form>

